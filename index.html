<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edge Density Ã— Recycling Arbitrage PoC</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #0a0a0f; color: #e0e0e0; min-height: 100vh; }
  
  .header { background: linear-gradient(135deg, #1a1a2e, #16213e); padding: 30px 40px; border-bottom: 1px solid #2a2a4a; }
  .header h1 { font-size: 28px; color: #00d4ff; margin-bottom: 8px; }
  .header p { color: #888; font-size: 14px; }
  .header .subtitle { color: #ffd700; font-size: 16px; margin-bottom: 4px; }
  
  .container { max-width: 1400px; margin: 0 auto; padding: 30px 40px; }
  
  .controls { display: flex; gap: 20px; margin-bottom: 30px; flex-wrap: wrap; align-items: center; }
  .controls label { color: #aaa; font-size: 13px; }
  .controls select, .controls input { background: #1a1a2e; border: 1px solid #333; color: #fff; padding: 8px 12px; border-radius: 6px; font-size: 14px; }
  .slider-group { display: flex; align-items: center; gap: 10px; }
  .slider-group input[type=range] { width: 150px; accent-color: #00d4ff; }
  .slider-val { color: #ffd700; font-weight: bold; min-width: 40px; }
  
  .dashboard { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
  
  .panel { background: #12121f; border: 1px solid #2a2a4a; border-radius: 12px; padding: 24px; }
  .panel h2 { font-size: 18px; color: #00d4ff; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
  
  .heatmap-container { overflow-x: auto; }
  table.heatmap { border-collapse: collapse; width: 100%; font-size: 13px; }
  table.heatmap th { padding: 10px 8px; text-align: center; color: #aaa; font-weight: 500; border-bottom: 1px solid #333; }
  table.heatmap th.row-header { text-align: left; min-width: 120px; }
  table.heatmap td { padding: 12px 8px; text-align: center; cursor: pointer; transition: all 0.2s; border-radius: 4px; position: relative; }
  table.heatmap td:hover { transform: scale(1.05); box-shadow: 0 0 12px rgba(0,212,255,0.3); z-index: 2; }
  table.heatmap td .cell-val { font-weight: bold; font-size: 15px; }
  table.heatmap td .cell-sub { font-size: 10px; opacity: 0.7; margin-top: 2px; }
  table.heatmap .row-label { text-align: left; color: #ccc; font-weight: 500; padding-left: 4px; }
  
  .detail-card { min-height: 300px; }
  .detail-card .placeholder { color: #555; text-align: center; padding: 80px 20px; font-size: 14px; }
  .detail-content h3 { color: #ffd700; margin-bottom: 12px; font-size: 20px; }
  .detail-content .metric { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #1e1e35; }
  .detail-content .metric-label { color: #888; }
  .detail-content .metric-value { font-weight: bold; }
  .detail-content .metric-value.positive { color: #00ff88; }
  .detail-content .metric-value.negative { color: #ff4444; }
  .detail-content .metric-value.neutral { color: #ffd700; }
  .detail-content .insight { margin-top: 16px; padding: 14px; background: #1a1a30; border-left: 3px solid #00d4ff; border-radius: 4px; font-size: 13px; line-height: 1.6; color: #bbb; }
  
  .bar-chart { margin-top: 12px; }
  .bar-row { display: flex; align-items: center; margin-bottom: 8px; gap: 10px; }
  .bar-label { min-width: 100px; font-size: 12px; color: #aaa; text-align: right; }
  .bar-track { flex: 1; height: 24px; background: #1a1a2e; border-radius: 4px; overflow: hidden; position: relative; }
  .bar-fill { height: 100%; border-radius: 4px; transition: width 0.5s ease; display: flex; align-items: center; padding-left: 8px; font-size: 11px; font-weight: bold; }
  .bar-value { min-width: 50px; font-size: 12px; font-weight: bold; text-align: right; }

  .full-width { grid-column: 1 / -1; }
  
  .legend { display: flex; gap: 4px; align-items: center; margin-bottom: 16px; }
  .legend-block { width: 30px; height: 14px; border-radius: 2px; }
  .legend-text { font-size: 11px; color: #888; margin: 0 8px 0 2px; }

  .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 30px; }
  .stat-card { background: #12121f; border: 1px solid #2a2a4a; border-radius: 10px; padding: 20px; text-align: center; }
  .stat-card .stat-value { font-size: 28px; font-weight: bold; color: #00d4ff; }
  .stat-card .stat-label { font-size: 12px; color: #888; margin-top: 4px; }
  .stat-card.highlight .stat-value { color: #00ff88; }
  .stat-card.warn .stat-value { color: #ffd700; }

  @media (max-width: 900px) {
    .dashboard { grid-template-columns: 1fr; }
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .container { padding: 16px; }
  }
</style>
</head>
<body>

<div class="header">
  <div class="subtitle">â™»ï¸ Recycling Leads Platform Ã— Network Theory</div>
  <h1>Edge Density Arbitrage Heatmap</h1>
  <p>æ‰¾åˆ°ã€Œæœ€æš—çš„é‚Šã€= æœ€å¤§çš„å¥—åˆ©æ©Ÿæœƒ | Trump é—œç¨…æƒ…å¢ƒæ¨¡æ“¬ | PoC v0.1</p>
</div>

<div class="container">

  <div class="controls">
    <div>
      <label>åœ°å€ç¯©é¸</label><br>
      <select id="regionFilter">
        <option value="all">å…¨éƒ¨åœ°å€</option>
        <option value="asia">äºæ´²</option>
        <option value="americas">ç¾æ´²</option>
        <option value="europe">æ­æ´²</option>
      </select>
    </div>
    <div class="slider-group">
      <label>Trump é—œç¨…èª¿æ•´</label>
      <input type="range" id="tariffSlider" min="-10" max="30" value="0" step="1">
      <span class="slider-val" id="tariffVal">0%</span>
    </div>
    <div class="slider-group">
      <label>åŒ¯ç‡æ³¢å‹• (USD)</label>
      <input type="range" id="fxSlider" min="-5" max="5" value="0" step="0.5">
      <span class="slider-val" id="fxVal">0%</span>
    </div>
  </div>

  <div class="stats-grid" id="statsGrid"></div>

  <div class="dashboard">
    <div class="panel full-width">
      <h2>ğŸ—ºï¸ Edge Density Heatmap â€” å»¢æ–™å“é¡ Ã— ç›®æ¨™å¸‚å ´</h2>
      <div class="legend">
        <div class="legend-block" style="background:#1a0a0a"></div><span class="legend-text">ä½å¯†åº¦(é«˜æ©Ÿæœƒ)</span>
        <div class="legend-block" style="background:#4a2020"></div>
        <div class="legend-block" style="background:#8a4010"></div>
        <div class="legend-block" style="background:#aa8020"></div>
        <div class="legend-block" style="background:#60a030"></div>
        <div class="legend-block" style="background:#20802080"></div><span class="legend-text">é«˜å¯†åº¦(ä½æ©Ÿæœƒ)</span>
      </div>
      <div class="heatmap-container">
        <table class="heatmap" id="heatmapTable"></table>
      </div>
    </div>

    <div class="panel detail-card" id="detailPanel">
      <h2>ğŸ“Š å¥—åˆ©æ©Ÿæœƒåˆ†æ</h2>
      <div class="placeholder">ğŸ‘† é»æ“Š Heatmap æ ¼å­æŸ¥çœ‹è©³ç´°åˆ†æ</div>
    </div>

    <div class="panel">
      <h2>ğŸ† Top å¥—åˆ©æ©Ÿæœƒæ’å</h2>
      <div id="rankingChart" class="bar-chart"></div>
    </div>
  </div>

</div>

<script>
// === DATA MODEL ===
const materials = [
  { id: 'e-waste', name: 'é›»å­å»¢æ–™', emoji: 'ğŸ–¥ï¸', category: 'metals' },
  { id: 'pet-bottles', name: 'PET å¯¶ç‰¹ç“¶', emoji: 'ğŸ¶', category: 'plastics' },
  { id: 'copper-wire', name: 'å»¢éŠ…ç·š', emoji: 'ğŸ”Œ', category: 'metals' },
  { id: 'cardboard', name: 'ç“¦æ¥ç´™', emoji: 'ğŸ“¦', category: 'paper' },
  { id: 'aluminum', name: 'å»¢é‹ç½', emoji: 'ğŸ¥«', category: 'metals' },
  { id: 'textile', name: 'å»¢ç´¡ç¹”å“', emoji: 'ğŸ‘•', category: 'textiles' },
  { id: 'rubber-tire', name: 'å»¢è¼ªèƒ', emoji: 'ğŸ›', category: 'rubber' },
  { id: 'glass', name: 'å»¢ç»ç’ƒ', emoji: 'ğŸ«™', category: 'glass' },
];

const markets = [
  { id: 'china', name: 'ä¸­åœ‹', region: 'asia', flag: 'ğŸ‡¨ğŸ‡³' },
  { id: 'vietnam', name: 'è¶Šå—', region: 'asia', flag: 'ğŸ‡»ğŸ‡³' },
  { id: 'india', name: 'å°åº¦', region: 'asia', flag: 'ğŸ‡®ğŸ‡³' },
  { id: 'japan', name: 'æ—¥æœ¬', region: 'asia', flag: 'ğŸ‡¯ğŸ‡µ' },
  { id: 'usa', name: 'ç¾åœ‹', region: 'americas', flag: 'ğŸ‡ºğŸ‡¸' },
  { id: 'mexico', name: 'å¢¨è¥¿å“¥', region: 'americas', flag: 'ğŸ‡²ğŸ‡½' },
  { id: 'germany', name: 'å¾·åœ‹', region: 'europe', flag: 'ğŸ‡©ğŸ‡ª' },
  { id: 'turkey', name: 'åœŸè€³å…¶', region: 'europe', flag: 'ğŸ‡¹ğŸ‡·' },
];

// Edge density data: lower = less connected = more arbitrage opportunity
// Based on real market dynamics in recycling trade
const baseData = {
  'e-waste': { china: 0.85, vietnam: 0.35, india: 0.55, japan: 0.70, usa: 0.60, mexico: 0.25, germany: 0.75, turkey: 0.40 },
  'pet-bottles': { china: 0.70, vietnam: 0.45, india: 0.50, japan: 0.80, usa: 0.65, mexico: 0.40, germany: 0.85, turkey: 0.55 },
  'copper-wire': { china: 0.90, vietnam: 0.30, india: 0.60, japan: 0.55, usa: 0.50, mexico: 0.35, germany: 0.65, turkey: 0.45 },
  'cardboard': { china: 0.75, vietnam: 0.55, india: 0.65, japan: 0.60, usa: 0.70, mexico: 0.50, germany: 0.80, turkey: 0.60 },
  'aluminum': { china: 0.80, vietnam: 0.40, india: 0.70, japan: 0.65, usa: 0.55, mexico: 0.30, germany: 0.70, turkey: 0.50 },
  'textile': { china: 0.60, vietnam: 0.50, india: 0.75, japan: 0.30, usa: 0.40, mexico: 0.35, germany: 0.45, turkey: 0.65 },
  'rubber-tire': { china: 0.55, vietnam: 0.40, india: 0.65, japan: 0.45, usa: 0.50, mexico: 0.55, germany: 0.60, turkey: 0.70 },
  'glass': { china: 0.50, vietnam: 0.25, india: 0.45, japan: 0.75, usa: 0.60, mexico: 0.20, germany: 0.80, turkey: 0.35 },
};

// Pricing data (USD/ton): buy price (waste) â†’ sell price (processed)
const pricing = {
  'e-waste': { buy: 200, sell: 3500, process: 400 },
  'pet-bottles': { buy: 80, sell: 650, process: 120 },
  'copper-wire': { buy: 1500, sell: 8200, process: 800 },
  'cardboard': { buy: 30, sell: 180, process: 25 },
  'aluminum': { buy: 400, sell: 2100, process: 300 },
  'textile': { buy: 50, sell: 400, process: 80 },
  'rubber-tire': { buy: 20, sell: 350, process: 100 },
  'glass': { buy: 15, sell: 120, process: 30 },
};

// Tariff sensitivity: how much Trump tariffs affect each market
const tariffSensitivity = {
  china: 1.0, vietnam: 0.3, india: 0.4, japan: 0.2, usa: 0.0, mexico: 0.7, germany: 0.3, turkey: 0.2
};

// Market-specific price multipliers
const marketMultiplier = {
  china: 1.1, vietnam: 0.85, india: 0.90, japan: 1.3, usa: 1.2, mexico: 0.80, germany: 1.25, turkey: 0.90
};

function getAdjustedData(tariffPct, fxPct) {
  const adjusted = {};
  for (const mat of materials) {
    adjusted[mat.id] = {};
    for (const mkt of markets) {
      let density = baseData[mat.id][mkt.id];
      // Tariff effect: higher tariff on a market = edge breaks = density drops = opportunity rises
      const tariffEffect = (tariffPct / 100) * tariffSensitivity[mkt.id] * 0.5;
      density = Math.max(0.05, Math.min(0.95, density - tariffEffect));
      // FX effect: stronger USD makes imports cheaper for US buyers
      const fxEffect = (fxPct / 100) * 0.1;
      density = Math.max(0.05, Math.min(0.95, density + fxEffect));
      adjusted[mat.id][mkt.id] = density;
    }
  }
  return adjusted;
}

function getArbitrageScore(density) {
  return ((1 - density) * 100).toFixed(0);
}

function getProfitMultiple(matId, mktId, tariffPct) {
  const p = pricing[matId];
  const mult = marketMultiplier[mktId];
  const tariffCost = (tariffPct / 100) * tariffSensitivity[mktId] * p.sell * mult * 0.3;
  const sellPrice = p.sell * mult;
  const totalCost = p.buy + p.process + Math.max(0, tariffCost);
  return ((sellPrice - totalCost) / totalCost).toFixed(1);
}

function densityToColor(d) {
  // Low density = dark red (opportunity), high = green (saturated)
  if (d < 0.2) return 'rgba(180, 20, 20, 0.9)';
  if (d < 0.35) return 'rgba(160, 50, 15, 0.85)';
  if (d < 0.5) return 'rgba(140, 90, 10, 0.75)';
  if (d < 0.65) return 'rgba(100, 130, 20, 0.6)';
  if (d < 0.8) return 'rgba(50, 120, 40, 0.5)';
  return 'rgba(30, 100, 50, 0.4)';
}

function render() {
  const tariffPct = parseInt(document.getElementById('tariffSlider').value);
  const fxPct = parseFloat(document.getElementById('fxSlider').value);
  document.getElementById('tariffVal').textContent = (tariffPct >= 0 ? '+' : '') + tariffPct + '%';
  document.getElementById('fxVal').textContent = (fxPct >= 0 ? '+' : '') + fxPct + '%';

  const regionFilter = document.getElementById('regionFilter').value;
  const filteredMarkets = regionFilter === 'all' ? markets : markets.filter(m => m.region === regionFilter);
  const data = getAdjustedData(tariffPct, fxPct);

  // Stats
  let totalOpps = 0, bestOpp = { score: 0 }, avgProfit = 0, count = 0;
  const allOpps = [];

  for (const mat of materials) {
    for (const mkt of filteredMarkets) {
      const d = data[mat.id][mkt.id];
      const score = 1 - d;
      const profit = parseFloat(getProfitMultiple(mat.id, mkt.id, tariffPct));
      allOpps.push({ mat, mkt, density: d, score, profit });
      if (score > 0.5) totalOpps++;
      if (score > bestOpp.score) bestOpp = { score, mat, mkt, profit };
      avgProfit += profit;
      count++;
    }
  }
  avgProfit = (avgProfit / count).toFixed(1);

  document.getElementById('statsGrid').innerHTML = `
    <div class="stat-card highlight"><div class="stat-value">${totalOpps}</div><div class="stat-label">é«˜æ©Ÿæœƒæ ¼å­ (density < 0.5)</div></div>
    <div class="stat-card"><div class="stat-value">${bestOpp.mat?.emoji || ''} â†’ ${bestOpp.mkt?.flag || ''}</div><div class="stat-label">æœ€ä½³æ©Ÿæœƒ</div></div>
    <div class="stat-card warn"><div class="stat-value">${avgProfit}x</div><div class="stat-label">å¹³å‡åˆ©æ½¤å€æ•¸</div></div>
    <div class="stat-card"><div class="stat-value">${tariffPct > 0 ? 'ğŸ”¥ æ´»èº' : 'ğŸ˜´ å¹³éœ'}</div><div class="stat-label">é—œç¨…å¥—åˆ©ç’°å¢ƒ</div></div>
  `;

  // Heatmap
  let html = '<thead><tr><th class="row-header">å»¢æ–™å“é¡</th>';
  for (const mkt of filteredMarkets) html += `<th>${mkt.flag} ${mkt.name}</th>`;
  html += '<th>Avg</th></tr></thead><tbody>';

  for (const mat of materials) {
    html += `<tr><td class="row-label">${mat.emoji} ${mat.name}</td>`;
    let rowSum = 0;
    for (const mkt of filteredMarkets) {
      const d = data[mat.id][mkt.id];
      rowSum += d;
      const arbScore = getArbitrageScore(d);
      const profit = getProfitMultiple(mat.id, mkt.id, tariffPct);
      html += `<td style="background:${densityToColor(d)}" onclick="showDetail('${mat.id}','${mkt.id}')">
        <div class="cell-val">${arbScore}</div>
        <div class="cell-sub">${profit}x</div>
      </td>`;
    }
    const avg = (rowSum / filteredMarkets.length).toFixed(2);
    html += `<td style="color:#888">${(((1 - avg) * 100).toFixed(0))}</td>`;
    html += '</tr>';
  }
  html += '</tbody>';
  document.getElementById('heatmapTable').innerHTML = html;

  // Ranking
  allOpps.sort((a, b) => b.score - a.score);
  const top8 = allOpps.slice(0, 8);
  const maxScore = top8[0]?.score || 1;

  let rankHtml = '';
  top8.forEach((opp, i) => {
    const pct = (opp.score / maxScore * 100).toFixed(0);
    const color = opp.profit > 5 ? '#00ff88' : opp.profit > 2 ? '#ffd700' : '#ff8844';
    rankHtml += `
      <div class="bar-row">
        <div class="bar-label">${opp.mat.emoji} â†’ ${opp.mkt.flag}</div>
        <div class="bar-track">
          <div class="bar-fill" style="width:${pct}%;background:${color}">${opp.mat.name}</div>
        </div>
        <div class="bar-value" style="color:${color}">${opp.profit}x</div>
      </div>`;
  });
  document.getElementById('rankingChart').innerHTML = rankHtml;
}

function showDetail(matId, mktId) {
  const tariffPct = parseInt(document.getElementById('tariffSlider').value);
  const mat = materials.find(m => m.id === matId);
  const mkt = markets.find(m => m.id === mktId);
  const data = getAdjustedData(tariffPct, parseFloat(document.getElementById('fxSlider').value));
  const density = data[matId][mktId];
  const p = pricing[matId];
  const mult = marketMultiplier[mktId];
  const profit = getProfitMultiple(matId, mktId, tariffPct);
  const sellPrice = (p.sell * mult).toFixed(0);
  const tariffCost = ((tariffPct / 100) * tariffSensitivity[mktId] * p.sell * mult * 0.3).toFixed(0);

  const insights = {
    'e-waste': 'é›»å­å»¢æ–™å«ç¨€æœ‰é‡‘å±¬ï¼ˆé‡‘ã€éˆ€ã€éŠ…ï¼‰ï¼Œè™•ç†å¾Œåƒ¹å€¼æ¥µé«˜ã€‚ä¸­åœ‹ 2018 å¹´ç¦ä»¤å¾Œï¼Œæ±å—äºæˆç‚ºæ–°ç†±é»ã€‚',
    'pet-bottles': 'rPET éœ€æ±‚å›  ESG æ³•è¦æŒçºŒä¸Šå‡ï¼Œæ­ç¾å“ç‰Œæ‰¿è«¾ 2030 å¹´å‰ä½¿ç”¨ 30% å†ç”Ÿæ–™ã€‚',
    'copper-wire': 'éŠ…åƒ¹èˆ‡å…¨çƒåŸºå»ºæŠ•è³‡é«˜åº¦ç›¸é—œï¼Œé›»å‹•è»Šè¶¨å‹¢æ¨å‡é•·æœŸéœ€æ±‚ã€‚',
    'cardboard': 'é›»å•†çˆ†ç™¼æ¨å‹•ç“¦æ¥ç´™å›æ”¶éœ€æ±‚ï¼Œä½†å–®åƒ¹ä½ï¼Œéœ€è¦é‡å¤§æ‰æœ‰åˆ©æ½¤ã€‚',
    'aluminum': 'é‹å›æ”¶ç¯€çœ 95% èƒ½æºï¼ŒESG è¶¨å‹¢ä¸‹å†ç”Ÿé‹æº¢åƒ¹æŒçºŒæ“´å¤§ã€‚',
    'textile': 'å¿«æ™‚å°šå»¢æ£„ç‰©å•é¡Œåš´é‡ï¼Œæ­ç›Ÿå³å°‡ç«‹æ³•è¦æ±‚ç´¡ç¹”å“å›æ”¶ã€‚',
    'rubber-tire': 'å»¢è¼ªèƒå¯ç…‰æ²¹ã€åšæ©¡è† ç²‰ï¼Œä½†ç’°ä¿æ³•è¦åš´æ ¼ï¼Œéœ€è¦è¨±å¯è­‰ã€‚',
    'glass': 'ç»ç’ƒå¯ç„¡é™å›æ”¶ï¼Œä½†é‹è¼¸æˆæœ¬é«˜ï¼Œé©åˆå€åŸŸæ€§æ“ä½œã€‚',
  };

  document.getElementById('detailPanel').innerHTML = `
    <h2>ğŸ“Š å¥—åˆ©æ©Ÿæœƒåˆ†æ</h2>
    <div class="detail-content">
      <h3>${mat.emoji} ${mat.name} â†’ ${mkt.flag} ${mkt.name}</h3>
      <div class="metric"><span class="metric-label">Edge Density</span><span class="metric-value ${density < 0.4 ? 'positive' : density < 0.6 ? 'neutral' : 'negative'}">${density.toFixed(2)} (${density < 0.4 ? 'ğŸ”¥ ä½å¯†åº¦=é«˜æ©Ÿæœƒ' : density < 0.6 ? 'âš¡ ä¸­ç­‰' : 'ğŸ˜ é«˜å¯†åº¦=é£½å’Œ'})</span></div>
      <div class="metric"><span class="metric-label">å¥—åˆ©åˆ†æ•¸</span><span class="metric-value positive">${getArbitrageScore(density)} / 100</span></div>
      <div class="metric"><span class="metric-label">å»¢æ–™æ”¶è³¼åƒ¹</span><span class="metric-value">$${p.buy}/å™¸</span></div>
      <div class="metric"><span class="metric-label">è™•ç†æˆæœ¬</span><span class="metric-value">$${p.process}/å™¸</span></div>
      <div class="metric"><span class="metric-label">å¸‚å ´å”®åƒ¹ (${mkt.name})</span><span class="metric-value positive">$${sellPrice}/å™¸</span></div>
      ${tariffPct > 0 ? `<div class="metric"><span class="metric-label">é—œç¨…æˆæœ¬</span><span class="metric-value negative">+$${tariffCost}/å™¸</span></div>` : ''}
      <div class="metric"><span class="metric-label">åˆ©æ½¤å€æ•¸</span><span class="metric-value ${profit > 3 ? 'positive' : profit > 1 ? 'neutral' : 'negative'}">${profit}x</span></div>
      <div class="insight">
        <strong>ğŸ’¡ å¸‚å ´æ´å¯Ÿï¼š</strong>${insights[matId]}
        ${tariffPct > 0 && tariffSensitivity[mktId] > 0.5 ? `<br><br>âš ï¸ <strong>é—œç¨…å½±éŸ¿ï¼š</strong>${mkt.name} å— Trump é—œç¨…å½±éŸ¿è¼ƒå¤§ï¼ˆæ•æ„Ÿåº¦ ${(tariffSensitivity[mktId]*100).toFixed(0)}%ï¼‰ï¼Œå¯è€ƒæ…®è½‰å‘ä½æ•æ„Ÿåº¦å¸‚å ´ã€‚` : ''}
        ${density < 0.35 ? `<br><br>ğŸ¯ <strong>å»ºè­°ï¼š</strong>æ­¤è·¯å¾‘ edge density æ¥µä½ï¼Œä»£è¡¨ç«¶çˆ­è€…å°‘ã€è³‡è¨Šä¸å°ç¨±å¤§ã€‚å»ºè­°å„ªå…ˆå»ºç«‹æ­¤é€šé“ï¼Œæˆç‚ºæ¨ç´ç¯€é»ã€‚` : ''}
      </div>
    </div>
  `;
}

// Event listeners
document.getElementById('tariffSlider').addEventListener('input', render);
document.getElementById('fxSlider').addEventListener('input', render);
document.getElementById('regionFilter').addEventListener('change', render);

// Initial render
render();
</script>
</body>
</html>
